<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>conversion.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>conversion.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <h2>Imports</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>  <span class="c1"># for calculations</span>
<span class="kn">import</span> <span class="nn">os</span>  <span class="c1"># for paths and directories</span>
<span class="kn">import</span> <span class="nn">zipfile</span>  <span class="c1"># to handle .zip files (.qua and .osz)</span>

<span class="kn">import</span> <span class="nn">yaml</span>  <span class="c1"># to parse .yaml files (.qua)</span>

<span class="kn">from</span> <span class="nn">constants</span> <span class="kn">import</span> <span class="o">*</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <h2>Functions</h2>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Parses the .qua (.yaml) difficulty file into an object using the PyYaml module</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">loadQua</span><span class="p">(</span><span class="n">fileContent</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">qua</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">fileContent</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">qua</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Cleans the path by removing illegal characters and replacing spaces with underscores <em>(currently unused)</em></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">cleanPath</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">path</span> <span class="o">=</span> <span class="n">REGEX_ILLEGAL_CHARACTERS</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">path</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <h3>General</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Generates the [General] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertGeneral</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Currently generates following attributes:</p>
<ul>
<li>AudioFilename</li>
<li>AudioLeadIn</li>
<li>PreviewTime</li>
<li>SampleSet</li>
<li>StackLeniency</li>
<li>Mode</li>
<li>LetterboxInBreaks</li>
<li>SpecialStyle</li>
<li>WidescreenStoryboard</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[General]&quot;</span><span class="p">]</span>
    <span class="n">generalRenames</span> <span class="o">=</span> <span class="n">RENAMES</span><span class="p">[</span><span class="s2">&quot;general&quot;</span><span class="p">]</span>
    <span class="n">generalDefaultValues</span> <span class="o">=</span> <span class="n">DEFAULT_VALUES</span><span class="p">[</span><span class="s2">&quot;general&quot;</span><span class="p">]</span>

    <span class="n">sampleSet</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;sampleSet&quot;</span><span class="p">]</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SampleSet: </span><span class="si">{sampleSet}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Attributes that exist in both games but are named differently</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">RENAMES</span><span class="p">[</span><span class="s2">&quot;general&quot;</span><span class="p">]:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{generalRenames[element]}</span><span class="s2">: </span><span class="si">{qua[element]}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">generalDefaultValues</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{attribute}</span><span class="s2">: </span><span class="si">{generalDefaultValues[attribute]}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <h3>Editor</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Generates the [Editor] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertEditor</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Currently generates following attributes:</p>
<ul>
<li>Bookmarks</li>
<li>DistanceSpacing</li>
<li>BeatDivisor</li>
<li>GridSize</li>
<li>TimelineZoom</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[Editor]&quot;</span><span class="p">]</span>
    <span class="n">editorDefaultValues</span> <span class="o">=</span> <span class="n">DEFAULT_VALUES</span><span class="p">[</span><span class="s2">&quot;editor&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">editorDefaultValues</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{attribute}</span><span class="s2">: </span><span class="si">{editorDefaultValues[attribute]}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <h3>Metadata</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Generates the [Metadata] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertMetadata</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Currently generates following attributes:</p>
<ul>
<li>AudioFile</li>
<li>Artist</li>
<li>ArtistUnicode</li>
<li>Title</li>
<li>TitleUnicode</li>
<li>Source</li>
<li>Creator</li>
<li>Tags</li>
<li>BeatmapID</li>
<li>BeatmapSetID</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[Metadata]&quot;</span><span class="p">]</span>
    <span class="n">metadataRenames</span> <span class="o">=</span> <span class="n">RENAMES</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span>
    <span class="n">metadataDefaultValues</span> <span class="o">=</span> <span class="n">DEFAULT_VALUES</span><span class="p">[</span><span class="s2">&quot;metadata&quot;</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">qua</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>Attributes that exist in both games and are named the same</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">element</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Artist&quot;</span><span class="p">,</span> <span class="s2">&quot;Title&quot;</span><span class="p">,</span> <span class="s2">&quot;Source&quot;</span><span class="p">,</span> <span class="s2">&quot;Creator&quot;</span><span class="p">]:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{element}</span><span class="s2">:</span><span class="si">{qua[element]}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>osu! uses ArtistUnicode and TitleUnicode attributes
to provide a romanized version of them. Since
Quaver doesn&rsquo;t really work with them, they can be set
to the same as the regular artist and title attribute</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">element</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Artist&quot;</span><span class="p">,</span> <span class="s2">&quot;Title&quot;</span><span class="p">]:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{element}</span><span class="s2">Unicode:</span><span class="si">{qua[element]}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>Attributes that exist in both games but are named differently</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">elif</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">metadataRenames</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{metadataRenames[element]}</span><span class="s2">:</span><span class="si">{qua[element]}</span><span class="s2">&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>Adding Quaver to tags additionally to the already existing
tags in the .qua</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">elif</span> <span class="n">element</span> <span class="o">==</span> <span class="s2">&quot;Tags&quot;</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="n">qua</span><span class="p">[</span><span class="s2">&quot;Tags&quot;</span><span class="p">]</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tags:Quaver </span><span class="si">{tags}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">metadataDefaultValues</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{attribute}</span><span class="s2">:</span><span class="si">{metadataDefaultValues[attribute]}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <h3>Difficulty</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Generates the [Difficulty] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertDifficulty</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>Currently generates following attributes:</p>
<ul>
<li>HPDrainRate</li>
<li>CircleSize</li>
<li>OverallDifficulty</li>
<li>ApproachRate</li>
<li>SliderMultiplier</li>
<li>SliderTickrate</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[Difficulty]&quot;</span><span class="p">]</span>
    <span class="n">difficultyDefaultValues</span> <span class="o">=</span> <span class="n">DEFAULT_VALUES</span><span class="p">[</span><span class="s2">&quot;difficulty&quot;</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>Mode is provided either as &ldquo;Keys4&rdquo; or &ldquo;Keys7&rdquo;, so this
extracts the number 4 or 7</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">keyCount</span> <span class="o">=</span> <span class="n">qua</span><span class="p">[</span><span class="s2">&quot;Mode&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">od</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">]</span>
    <span class="n">hp</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;hp&quot;</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <p>osu!mania uses Circle Size to save the key count</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CircleSize: </span><span class="si">{keyCount}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;OverallDifficulty: </span><span class="si">{od}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;HPDrainRate: </span><span class="si">{hp}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">difficultyDefaultValues</span><span class="p">:</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{attribute}</span><span class="s2">: </span><span class="si">{difficultyDefaultValues[attribute]}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <h3>Events</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>Generates the [Events] section of the .osu (only background)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertEvents</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>Background syntax: <code>0,0,filename,0,0</code></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[Events]&quot;</span><span class="p">]</span>
    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;0,0,&quot;</span><span class="si">{qua[&quot;BackgroundFile&quot;]}</span><span class="s1">&quot;,0,0&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <h3>Timing Points</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>Generates the [TimingPoints] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertTimingPoints</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <p>Structure of a timing point:
[time,beatLength,meter,sampleSet,sampleIndex,volume,uninherited,effects]</p>
<ul>
<li>
<p>time (int)</p>
<ul>
<li>Start time of the timing section, in milliseconds from the
beginning of the beatmap&rsquo;s audio. The end of the timing section
is the next timing point&rsquo;s time (or never, if this is the
last timing point).</li>
</ul>
</li>
<li>
<p>beatLength : float</p>
<ul>
<li>For uninherited timing points, the duration of a beat, in
    milliseconds.</li>
<li>For inherited timing points, a negative inverse slider
    velocity multiplier, as a percentage. For example, -50 would
    make all sliders in this timing section twice
    as fast as SliderMultiplier.</li>
</ul>
</li>
<li>
<p>meter (int)</p>
<ul>
<li>Amount of beats in a measure. Inherited timing points ignore
this property.</li>
</ul>
</li>
<li>
<p>sampleSet (int)</p>
<ul>
<li>Default sample set for hit objects (0 = beatmap default,
1 = normal, 2 = soft, 3 = drum).</li>
</ul>
</li>
<li>
<p>sampleIndex (int)</p>
<ul>
<li>Custom sample index for hit objects. 0 indicates osu!&rsquo;s default
hit sounds.</li>
</ul>
</li>
<li>
<p>volume (int)</p>
<ul>
<li>Volume percentage for hit objects.</li>
</ul>
</li>
<li>
<p>uninherited (0 or 1)</p>
<ul>
<li>Whether or not the timing point is uninherited.</li>
</ul>
</li>
<li>
<p>effects (int:int:&hellip;)</p>
<ul>
<li>Bit flags that give the timing point extra effects.</li>
</ul>
</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[TimingPoints]&quot;</span><span class="p">]</span>
    <span class="n">hitSoundVolume</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s2">&quot;hitSoundVolume&quot;</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p>Converts each timing point</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">timingPoint</span> <span class="ow">in</span> <span class="n">qua</span><span class="p">[</span><span class="s2">&quot;TimingPoints&quot;</span><span class="p">]:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>If any value is 0 then Quaver doesn&rsquo;t print it in the qua</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">startTime</span> <span class="o">=</span> <span class="n">timingPoint</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;StartTime&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">bpm</span> <span class="o">=</span> <span class="n">timingPoint</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Bpm&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bpm</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># 0.0x BPM or negative BPM</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>osu! can&rsquo;t really work with negative BPM and working with 0
BPM is a pain by itself, so I&rsquo;m substituting the value
with very low bpm value (0.000006 BPM) instead. It still shows as
0 BPM in song select though, because of rounding.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">msPerBeat</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10e10</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msPerBeat</span> <span class="o">=</span> <span class="mi">60000</span> <span class="o">/</span> <span class="n">bpm</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{startTime}</span><span class="s2">,</span><span class="si">{msPerBeat}</span><span class="s2">,4,0,0,</span><span class="si">{hitSoundVolume}</span><span class="s2">,1,0&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>Converts each SV point</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">sv</span> <span class="ow">in</span> <span class="n">qua</span><span class="p">[</span><span class="s2">&quot;SliderVelocities&quot;</span><span class="p">]:</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">sv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;StartTime&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">multiplier</span> <span class="o">=</span> <span class="n">sv</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Multiplier&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">multiplier</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># 0.0x SV or negative SV</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>Similar to BPM, osu! can&rsquo;t handle 0x or negative SV values, which is why
I&rsquo;m substituting it with a very low value (0.00000001‬x). osu! clamps
all SV values between 0.01x-10x, so putting -10e10 instead of -10e4
doesn&rsquo;t <em>really</em> make a difference. That could change with lazer though
so I&rsquo;m keeping it in.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">svValue</span> <span class="o">=</span> <span class="o">-</span><span class="mf">10e10</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">svValue</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span> <span class="o">/</span> <span class="n">multiplier</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{startTime}</span><span class="s2">,</span><span class="si">{svValue}</span><span class="s2">,0,0,0,</span><span class="si">{hitSoundVolume}</span><span class="s2">,0,0&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>I&rsquo;m running through all uninherited points, then all inherited points,
which means that the lines aren&rsquo;t chronologically sorted.
osu! doesnt care about the order of the timing points though, so
I&rsquo;m not sorting it.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <h3>Hit Objects</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>Generates the [HitObjects] section of the .osu</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertHitObjects</span><span class="p">(</span><span class="n">qua</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      <ul>
<li>
<p>Types:</p>
<ul>
<li>1 &lt;&lt; 0 : Hit circle (normal note in osu!mania)</li>
<li>1 &lt;&lt; 1 : Slider (unused in osu!mania)</li>
<li>1 &lt;&lt; 3 : Spinner (unused in osu!mania)</li>
<li>1 &lt;&lt; 7 : osu!mania hold (commonly referred to as long note or LN)</li>
</ul>
</li>
<li>
<p>Structure of a normal hit object:</p>
<ul>
<li>[x,y,time,type,hitSound,objectParams,hitSample]</li>
<li>x (int)<ul>
<li>Determines the index of the column that the note will be in.
It is computed by floor(x * columnCount / 512) and
clamped between 0 and columnCount - 1.</li>
</ul>
</li>
<li>y (int)<ul>
<li>Unused in osu!mania, defaults to 192</li>
</ul>
</li>
<li>time (int)<ul>
<li>Time when the object is to be hit, in milliseconds from
the beginning of the beatmap&rsquo;s audio.</li>
</ul>
</li>
<li>type (int)<ul>
<li>Bit flags indicating the type of the object.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>hitSound (int,int,&hellip;)
        - Extra parameters specific to the object&rsquo;s type.</p>
<ul>
<li>objectParams<ul>
<li>Extra parameters specific to the object&rsquo;s type.</li>
</ul>
</li>
<li>hitSample (int)<ul>
<li>bitwise flag</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Structure of a LN:</p>
<ul>
<li>[x,y,time,type,hitSound,endTime:hitSample]</li>
<li>endTime (int)<ul>
<li>End time of the hold, in milliseconds from the
beginning of the beatmap&rsquo;s audio.</li>
</ul>
</li>
</ul>
</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;[HitObjects]&quot;</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>Mode is provided either as &ldquo;Keys4&rdquo; or &ldquo;Keys7&rdquo;, so this
extracts the number 4 or 7</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">numberOfCcolumns</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">qua</span><span class="p">[</span><span class="s2">&quot;Mode&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>

    <span class="k">for</span> <span class="n">hitObject</span> <span class="ow">in</span> <span class="n">qua</span><span class="p">[</span><span class="s2">&quot;HitObjects&quot;</span><span class="p">]:</span>

        <span class="n">startTime</span> <span class="o">=</span> <span class="n">hitObject</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;StartTime&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">lane</span> <span class="o">=</span> <span class="n">hitObject</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Lane&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      <p>osu! uses the x-coordinate to determine the
column, the max width of the osu playfield is 512</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">xPos</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">((</span><span class="n">lane</span> <span class="o">/</span> <span class="n">numberOfCcolumns</span><span class="p">)</span> <span class="o">*</span> <span class="mi">512</span><span class="p">)</span> <span class="o">-</span> <span class="mi">64</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>y-coordinate is unused so default is set to 192, half of
osu!s max height</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">yPos</span> <span class="o">=</span> <span class="mi">192</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>Bitwise enum</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">hsBits</span> <span class="o">=</span> <span class="mi">0</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      <p>Don&rsquo;t ask me how, but I&rsquo;ve had hitsound values of -15 already, even though
anything other than a comma-seperated string shouldn&rsquo;t even be possible</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="s2">&quot;HitSound&quot;</span> <span class="ow">in</span> <span class="n">hitObject</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hitObject</span><span class="p">[</span><span class="s2">&quot;HitSound&quot;</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">hitSounds</span> <span class="o">=</span> <span class="n">hitObject</span><span class="p">[</span><span class="s2">&quot;HitSound&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;, &quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">hitSound</span> <span class="ow">in</span> <span class="n">hitSounds</span><span class="p">:</span>
                <span class="n">hsBits</span> <span class="o">+=</span> <span class="n">HIT_SOUNDS</span><span class="p">[</span><span class="n">hitSound</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>Is Normal note</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="s2">&quot;EndTime&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hitObject</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{xPos}</span><span class="s2">,</span><span class="si">{yPos}</span><span class="s2">,</span><span class="si">{startTime}</span><span class="s2">,1,</span><span class="si">{hsBits}</span><span class="s2">,0:0:0:0:&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      <p>LN</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">else</span><span class="p">:</span>
            <span class="n">endTime</span> <span class="o">=</span> <span class="n">hitObject</span><span class="p">[</span><span class="s2">&quot;EndTime&quot;</span><span class="p">]</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{xPos}</span><span class="s2">,</span><span class="si">{yPos}</span><span class="s2">,</span><span class="si">{startTime}</span><span class="s2">,128,</span><span class="si">{hsBits}</span><span class="s2">,</span><span class="si">{endTime}</span><span class="s2">:0:0:0:0:&quot;</span>

        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <h3>Mapset</h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-48'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-48'>#</a>
      </div>
      <p>Converts a .qua beatmap file to a .osu beatmap file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertQua2Osu</span><span class="p">(</span><span class="n">fileContent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-49'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-49'>#</a>
      </div>
      <p>All parts are split into different sections, defined by the .osu structure:</p>
<ul>
<li>General<ul>
<li>Contains general settings</li>
</ul>
</li>
<li>Editor<ul>
<li>Contains editor related settings</li>
</ul>
</li>
<li>Metadata<ul>
<li>Contains the metadata of the beatmap</li>
</ul>
</li>
<li>Difficulty<ul>
<li>Contains difficulty related settings</li>
</ul>
</li>
<li>Events<ul>
<li>Contains the background file name</li>
</ul>
</li>
<li>TimingPoints<ul>
<li>Contains the timing</li>
</ul>
</li>
<li>HitObjects<ul>
<li>Contains the hit objects (notes)</li>
</ul>
</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">qua</span> <span class="o">=</span> <span class="n">loadQua</span><span class="p">(</span><span class="n">fileContent</span><span class="p">)</span>

    <span class="n">osu</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span>
        <span class="s2">&quot;// This map was converted using qua2osu&quot;</span><span class="p">,</span>
        <span class="s2">&quot;osu file format v14&quot;</span><span class="p">,</span>
        <span class="n">convertGeneral</span><span class="p">(</span><span class="n">qua</span><span class="p">,</span> <span class="n">options</span><span class="p">),</span>
        <span class="n">convertEditor</span><span class="p">(),</span>
        <span class="n">convertMetadata</span><span class="p">(</span><span class="n">qua</span><span class="p">),</span>
        <span class="n">convertDifficulty</span><span class="p">(</span><span class="n">qua</span><span class="p">,</span> <span class="n">options</span><span class="p">),</span>
        <span class="n">convertEvents</span><span class="p">(</span><span class="n">qua</span><span class="p">),</span>
        <span class="n">convertTimingPoints</span><span class="p">(</span><span class="n">qua</span><span class="p">,</span> <span class="n">options</span><span class="p">),</span>
        <span class="n">convertHitObjects</span><span class="p">(</span><span class="n">qua</span><span class="p">)</span>
    <span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-50'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-50'>#</a>
      </div>
      <p>Extra empty line at the bottom to help some tools
who expect one (like the R programming language)</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">osu</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-51'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-51'>#</a>
      </div>
      <p>Converts a whole .qp mapset to a .osz mapset</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">convertMapset</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">outputFolder</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-52'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-52'>#</a>
      </div>
      <p>Moves all files to a new directory and converts all .qua files to .osu files</p>
<p>This function is called in the GUI.</p>
<p>Options parameter is built up as following:</p>
<pre><code>options = {
    "od": int,
    "hp": int,
    "hitSoundVolume": int,
    "sampleSet": ["Soft","Normal","Drum"]
}
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-53'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-53'>#</a>
      </div>
      <p>Prefixing with &ldquo;q_&rdquo; to prevent osu from showing the wrong preview
backgrounds, because it takes the folder number to
choose the background for whatever reason</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">folderName</span> <span class="o">=</span> <span class="s2">&quot;q_&quot;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.qp&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">outputPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputFolder</span><span class="p">,</span> <span class="n">folderName</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-54'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-54'>#</a>
      </div>
      <p>Opens the .qp (.zip) mapset file and extracts it into a folder in the same directory</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">oldDir</span><span class="p">:</span>
        <span class="n">oldDir</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">outputPath</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-55'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-55'>#</a>
      </div>
      <p>Converts each .qua difficulty file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">outputPath</span><span class="p">):</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">outputPath</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-56'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-56'>#</a>
      </div>
      <p>Replaces each .qua file with the converted .osu file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.qua&quot;</span><span class="p">):</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">openedFile</span><span class="p">:</span>
                <span class="n">fileContent</span> <span class="o">=</span> <span class="n">openedFile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">osu</span> <span class="o">=</span> <span class="n">convertQua2Osu</span><span class="p">(</span><span class="n">fileContent</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.qua&quot;</span><span class="p">,</span> <span class="s2">&quot;.osu&quot;</span><span class="p">),</span> <span class="s2">&quot;w+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">newFile</span><span class="p">:</span>
                    <span class="n">newFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">osu</span><span class="p">)</span>

            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-57'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-57'>#</a>
      </div>
      <p>Creates a new .osz (.zip) mapset file</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">outputPath</span> <span class="o">+</span> <span class="s2">&quot;.osz&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">newDir</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">outputPath</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                <span class="n">newDir</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span> <span class="n">file</span><span class="p">)</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
